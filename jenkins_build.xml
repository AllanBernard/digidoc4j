<?xml version="1.0" encoding="UTF-8"?>
<project xmlns:artifact="antlib:org.apache.maven.artifact.ant"
         name="digidoc4j jenkins builder" basedir=".">
  <property file="password.properties"/>
  <property name="dist.dir" value="dist"/>

  <condition property="version" value="0.2.${env.BUILD_NUMBER}-beta" else="0.2.LOCAL_BUILD-beta">
    <isset property="env.BUILD_NUMBER"/>
  </condition>

  <path id="maven-ant-tasks.classpath" path="maven-ant/maven-ant-tasks-2.1.3.jar"/>
  <typedef resource="org/apache/maven/artifact/ant/antlib.xml" uri="antlib:org.apache.maven.artifact.ant"
           classpathref="maven-ant-tasks.classpath"/>

  <target name="sd-dss">
    <artifact:mvn pom="sd-dss\pom.xml">
    <arg value="-e"/>
      <arg value="clean"/>
      <arg value="install"/>
    </artifact:mvn>
  </target>

  <target name="sign">
    <signjar jar="${dist.dir}/digidoc4j-${version}.jar" storetype="pkcs12"
             keystore="testFiles/codesign2014.pfx"
             alias="f5a035698e5674bac8d45b742bc163a5_59e8b597-f62a-4665-af98-fc45e3270c39"
             storepass="${signingpassword}"/>
  </target>
</project>