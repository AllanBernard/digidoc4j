<?xml version="1.0" encoding="UTF-8"?>
<project name="digidoc4j jenkins builder" basedir=".">
  <property file="password.properties"/>
  <property name="dist.dir" value="dist"/>
  <property environment="env"/>

  <condition property="version" value="0.2.${env.BUILD_NUMBER}-beta" else="0.2.LOCAL_BUILD-beta">
    <isset property="env.BUILD_NUMBER"/>
  </condition>

  <target name="sd-dss">
    <exec executable="mvn" dir="sd-dss">
      <arg line="clean"/>
      <arg line="install"/>
    </exec>
  </target>

  <target name="sign">
    <echo message="${dist.dir}/digidoc4j-${version}.jar"/>
    <signjar jar="${dist.dir}/digidoc4j-${version}.jar" storetype="pkcs12"
             keystore="testFiles/codesign2014.pfx"
             alias="f5a035698e5674bac8d45b742bc163a5_59e8b597-f62a-4665-af98-fc45e3270c39"
             storepass="${signingpassword}"/>
  </target>
</project>