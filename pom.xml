<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">

  <modelVersion>4.0.0</modelVersion>
  <groupId>org.digidoc4j</groupId>
  <artifactId>digidoc4j</artifactId>
  <packaging>jar</packaging>
  <version>1.0.6.beta.2</version>
  <name>DigiDoc4j</name>
  <description>DigiDoc4j is a Java library for digitally signing documents and creating digital signature containers of signed documents</description>
  <url>https://github.com/open-eid/digidoc4j</url>
  <licenses>
    <license>
      <name>GNU Lesser General Public License, Version 2.1</name>
      <url>http://www.gnu.org/licenses/lgpl-2.1.html</url>
    </license>
  </licenses>
  <scm>
    <connection>scm:git:git@github.com:open-eid/digidoc4j.git</connection>
    <developerConnection>scm:git:git@github.com:open-eid/digidoc4j.git</developerConnection>
    <url>https://github.com/open-eid/digidoc4j.git</url>
  </scm>
  <issueManagement>
    <system>Pivotal</system>
    <url>https://www.pivotaltracker.com/n/projects/1110130</url>
  </issueManagement>
  <properties>
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
    <maven.compiler.compilerVersion>1.7</maven.compiler.compilerVersion>
    <project.encoding>UTF-8</project.encoding>
    <slf4j.version>1.7.25</slf4j.version>
    <logback-classic.version>1.2.3</logback-classic.version>
    <bouncycastle.version>1.54</bouncycastle.version>
    <junit.version>4.11</junit.version>
    <dss.version>4.7.RC2.d4j.1</dss.version>
    <dss.util.build>${project.basedir}/build/</dss.util.build>
    <dss.util.lib>${project.basedir}/utility-package-lib</dss.util.lib>
    <dss.zip.lib>${project.basedir}/zip-package-lib</dss.zip.lib>
  </properties>

  <profiles>
    <profile>
      <id>notJava8</id>
      <activation>
        <jdk>[1.7,1.8)</jdk>
        <file>
          <exists>${java.home}/lib/jfxrt.jar</exists>
        </file>
      </activation>
      <properties>
        <project.source.version>1.7</project.source.version>
        <jfxrt.jar>${java.home}/lib/jfxrt.jar</jfxrt.jar>
      </properties>
    </profile>

    <profile>
      <id>java8</id>
      <activation>
        <jdk>[1.8,)</jdk>
        <file>
          <exists>${java.home}/lib/ext/jfxrt.jar</exists>
        </file>
      </activation>
      <properties>
        <project.source.version>1.7</project.source.version>
        <jfxrt.jar>${java.home}/lib/ext/jfxrt.jar</jfxrt.jar>
      </properties>
    </profile>

    <profile>
      <id>delivery</id>
      <build>
        <plugins>
          <plugin>
            <artifactId>maven-surefire-plugin</artifactId>
            <configuration>
              <skip>true</skip>
            </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <executions>
              <execution>
                <id>default-testCompile</id>
                <phase>test-compile</phase>
                <goals>
                  <goal>testCompile</goal>
                </goals>
                <configuration>
                  <skip>true</skip>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
    <profile>
      <id>test-coverage</id>
      <build>
        <plugins>
          <plugin>
            <groupId>org.jacoco</groupId>
            <artifactId>jacoco-maven-plugin</artifactId>
            <version>0.7.9</version>
            <executions>
              <execution>
                <id>prepare-unit-tests</id>
                <goals>
                  <goal>prepare-agent</goal>
                </goals>
                <configuration>
                  <destFile>${project.basedir}/target/coverage-reports/jacoco-unit.exec</destFile>
                </configuration>
              </execution>
              <execution>
                <id>jacoco-site</id>
                <phase>verify</phase>
                <goals>
                  <goal>report</goal>
                </goals>
                <configuration>
                  <dataFile>${project.basedir}/target/coverage-reports/jacoco-unit.exec</dataFile>
                </configuration>
              </execution>
            </executions>
          </plugin>
        </plugins>
      </build>
    </profile>
  </profiles>

  <repositories>
    <repository>
      <id>lib</id>
      <url>file:${project.basedir}/lib</url>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
      <groupId>ee.sk.digidoc</groupId>
      <artifactId>jdigidoc</artifactId>
      <version>3.12.1</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <groupId>iaik.pkcs</groupId>
          <artifactId>iaikPkcs11Wrapper</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>commons-cli</groupId>
      <artifactId>commons-cli</artifactId>
      <version>1.4</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.commons</groupId>
      <artifactId>commons-compress</artifactId>
      <version>1.3</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-io</groupId>
      <artifactId>commons-io</artifactId>
      <version>2.5</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-codec</groupId>
      <artifactId>commons-codec</artifactId>
      <version>1.10</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-lang</groupId>
      <artifactId>commons-lang</artifactId>
      <version>2.6</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-logging</groupId>
      <artifactId>commons-logging</artifactId>
      <version>1.2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>commons-collections</groupId>
      <artifactId>commons-collections</artifactId>
      <version>3.2.2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.httpcomponents</groupId>
      <artifactId>httpclient</artifactId>
      <version>4.5.3</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.httpcomponents</groupId>
      <artifactId>httpcore</artifactId>
      <version>4.4.6</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.apache.santuario</groupId>
      <artifactId>xmlsec</artifactId>
      <version>2.0.8</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <groupId>org.codehaus.woodstox</groupId>
          <artifactId>woodstox-core-asl</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.bouncycastle</groupId>
      <artifactId>bcmail-jdk15on</artifactId>
      <version>${bouncycastle.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.bouncycastle</groupId>
      <artifactId>bcpkix-jdk15on</artifactId>
      <version>${bouncycastle.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.bouncycastle</groupId>
      <artifactId>bcprov-jdk15on</artifactId>
      <version>${bouncycastle.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>xalan</groupId>
      <artifactId>serializer</artifactId>
      <version>2.7.2</version>
      <scope>compile</scope>
      <exclusions>
        <exclusion>
          <groupId>xml-apis</groupId>
          <artifactId>xml-apis</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>xalan</groupId>
      <artifactId>xalan</artifactId>
      <version>2.7.2</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.yaml</groupId>
      <artifactId>snakeyaml</artifactId>
      <version>1.18</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>slf4j-api</artifactId>
      <version>${slf4j.version}</version>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>ch.qos.logback</groupId>
      <artifactId>logback-classic</artifactId>
      <version>${logback-classic.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>ch.qos.logback</groupId>
      <artifactId>logback-core</artifactId>
      <version>${logback-classic.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.slf4j</groupId>
      <artifactId>log4j-over-slf4j</artifactId>
      <version>${slf4j.version}</version>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>org.hamcrest</groupId>
      <artifactId>hamcrest-core</artifactId>
      <version>1.3</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.mockito</groupId>
      <artifactId>mockito-all</artifactId>
      <version>1.10.19</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.github.stefanbirkner</groupId>
      <artifactId>system-rules</artifactId>
      <version>1.16.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>${junit.version}</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>xmlunit</groupId>
      <artifactId>xmlunit</artifactId>
      <version>1.6</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.hamcrest</groupId>
      <artifactId>hamcrest-library</artifactId>
      <version>1.3</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.databene</groupId>
      <artifactId>contiperf</artifactId>
      <version>2.3.4</version>
      <scope>test</scope>
    </dependency>

    <dependency>
      <groupId>com.github.tomakehurst</groupId>
      <artifactId>wiremock</artifactId>
      <version>1.58</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty</artifactId>
      <version>6.1.26</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty-util</artifactId>
      <version>6.1.26</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>servlet-api</artifactId>
      <version>2.5.20110712</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.google.guava</groupId>
      <artifactId>guava</artifactId>
      <version>20.0</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.fasterxml.jackson.core</groupId>
      <artifactId>jackson-databind</artifactId>
      <version>2.8.8</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.fasterxml.jackson.core</groupId>
      <artifactId>jackson-core</artifactId>
      <version>2.8.8</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.fasterxml.jackson.core</groupId>
      <artifactId>jackson-annotations</artifactId>
      <version>2.8.8</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>org.skyscreamer</groupId>
      <artifactId>jsonassert</artifactId>
      <version>1.5.0</version>
      <scope>test</scope>
      <exclusions>
        <exclusion>
          <groupId>com.vaadin.external.google</groupId>
          <artifactId>android-json</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>org.json</groupId>
      <artifactId>json</artifactId>
      <version>20160810</version>
      <scope>test</scope>
      <exclusions>
        <exclusion>
          <groupId>com.jayway.jsonpath</groupId>
          <artifactId>json-path</artifactId>
        </exclusion>
        <exclusion>
          <groupId>net.minidev</groupId>
          <artifactId>json-smart</artifactId>
        </exclusion>
      </exclusions>
    </dependency>
    <dependency>
      <groupId>log4j</groupId>
      <artifactId>log4j</artifactId>
      <version>1.2.17</version>
      <scope>compile</scope>
    </dependency>

    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-common-validation-jaxb</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-detailed-report-jaxb</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-diagnostic-jaxb</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-document</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-model</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-policy-jaxb</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-reports</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-service</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-simple-report-jaxb</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-spi</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-token</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-tsl-jaxb</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-tsl-validation</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>dss-xades</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <dependency>
      <groupId>org.digidoc4j.dss</groupId>
      <artifactId>validation-policy</artifactId>
      <version>${dss.version}</version>
      <scope>compile</scope>
    </dependency>
    <!--<dependency>
      <groupId>org.digidoc4j</groupId>
      <artifactId>esteidtestcerts</artifactId>
      <version>1.0</version>
      <scope>test</scope>
    </dependency>-->
  </dependencies>

  <build>
    <sourceDirectory>src</sourceDirectory>
    <testSourceDirectory>test</testSourceDirectory>
    <outputDirectory>build</outputDirectory>
    <testOutputDirectory>target/test-classes</testOutputDirectory>

    <resources>
      <resource>
        <directory>resources</directory>
        <excludes>
          <exclude>logback.xml</exclude>
        </excludes>
      </resource>
      <resource>
        <directory>conf</directory>
        <targetPath>conf</targetPath>
      </resource>
      <resource>
        <directory>keystore</directory>
        <excludes>
          <exclude>keystore_certs/*.*</exclude>
          <exclude>test_keystore_certs/*.*</exclude>
        </excludes>
        <targetPath>keystore</targetPath>
      </resource>
    </resources>

    <plugins>
      <plugin>
        <artifactId>maven-clean-plugin</artifactId>
        <version>3.0.0</version>
        <executions>
          <execution>
            <id>clean</id>
            <phase>clean</phase>
            <goals>
              <goal>clean</goal>
            </goals>
            <configuration>
              <filesets>
                <fileset>
                  <directory>${project.basedir}/lib</directory>
                  <excludes>
                    <exclude>**/esteidtestcerts.jar</exclude>
                    <exclude>**/jacocoagent.jar</exclude>
                    <exclude>**/jacocoant.jar</exclude>
                  </excludes>
                </fileset>
                <fileset>
                  <directory>${dss.util.lib}</directory>
                </fileset>
                <fileset>
                  <directory>${dss.zip.lib}</directory>
                </fileset>
                <fileset>
                  <directory>${project.basedir}/build</directory>
                </fileset>
                <fileset>
                  <directory>${project.basedir}/target</directory>
                </fileset>
              </filesets>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <executions>
          <execution>
            <id>copy-dependencies</id>
            <phase>compile</phase>
            <goals>
              <goal>copy-dependencies</goal>
            </goals>
            <configuration>
              <outputDirectory>${project.basedir}/lib</outputDirectory>
              <overWriteIfNewer>true</overWriteIfNewer>
              <excludeTransitive>true</excludeTransitive>
            </configuration>
          </execution>
          <execution>
            <id>copy-utils-jars</id>
            <phase>compile</phase>
            <goals>
              <goal>copy-dependencies</goal>
            </goals>
            <configuration>
              <includeScope>compile</includeScope>
              <outputDirectory>${dss.util.lib}</outputDirectory>
              <overWriteIfNewer>true</overWriteIfNewer>
              <excludeTransitive>true</excludeTransitive>
              <excludeArtifactIds>
                contiperf, dss-common-validation-jaxb,
                dss-detailed-report-jaxb, dss-diagnostic-jaxb, dss-document, dss-model, dss-policy-jaxb,
                dss-reports, dss-service, dss-simple-report-jaxb, dss-spi, dss-token, dss-tsl-jaxb,
                dss-tsl-validation, dss-xades, validation-policy, log4j
              </excludeArtifactIds>
            </configuration>
          </execution>
          <execution>
            <id>copy-zip-jars</id>
            <phase>compile</phase>
            <goals>
              <goal>copy-dependencies</goal>
            </goals>
            <configuration>
              <includeScope>compile</includeScope>
              <outputDirectory>${dss.zip.lib}</outputDirectory>
              <overWriteIfNewer>true</overWriteIfNewer>
              <excludeTransitive>true</excludeTransitive>
              <excludeArtifactIds>
                contiperf, dss-common-validation-jaxb,
                dss-detailed-report-jaxb, dss-diagnostic-jaxb, dss-document, dss-model, dss-policy-jaxb,
                dss-reports, dss-service, dss-simple-report-jaxb, dss-spi, dss-token, dss-tsl-jaxb,
                dss-tsl-validation, dss-xades, validation-policy, log4j-over-slf4j, logback-classic,
                logback-core
              </excludeArtifactIds>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>3.0.0</version>
        <configuration>
          <descriptors>
            <descriptor>assembly/zip.xml</descriptor>
            <!--<descriptor>assembly/util.xml</descriptor>-->
          </descriptors>
        </configuration>
        <executions>
          <execution>
            <id>zip-archive</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-jar-plugin</artifactId>
            <configuration>
              <excludes>
                <exclude>prototype/**</exclude>
              </excludes>
              <archive>
                <manifestSections>
                  <manifestSection>
                    <Name>DigiDoc4j</Name>
                    <manifestEntries>
                      <Implementation-Vendor>Republic of Estonia Information System Authority</Implementation-Vendor>
                      <Implementation-Title>Java BDoc/DigiDoc library</Implementation-Title>
                      <Implementation-Version>${project.version}</Implementation-Version>
                    </manifestEntries>
                  </manifestSection>
                </manifestSections>
              </archive>
            </configuration>
      </plugin>

      <plugin>
        <groupId>org.jacoco</groupId>
        <artifactId>jacoco-maven-plugin</artifactId>
        <version>0.7.9</version>
        <executions>
          <execution>
            <id>prepare-unit-test-agent</id>
            <goals>
              <goal>prepare-agent</goal>
            </goals>
          </execution>
          <execution>
            <id>generate-unit-test-report</id>
            <goals>
              <goal>merge</goal>
              <goal>report</goal>
            </goals>
          </execution>
          <execution>
            <id>prepare-integration-test-agent</id>
            <goals>
              <goal>prepare-agent-integration</goal>
            </goals>
          </execution>
          <execution>
            <id>generate-integration-test-report</id>
            <goals>
              <goal>merge</goal>
              <goal>report-integration</goal>
            </goals>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.20</version>
        <configuration>
          <additionalClasspathElements>
            <additionalClasspathElement>${project.basedir}/lib/esteidtestcerts.jar</additionalClasspathElement>
          </additionalClasspathElements>
          <!-- Default test configuration -->
          <argLine>@{argLine} -Dfile.encoding=UTF-8</argLine>
        </configuration>
        <executions>
          <execution>
            <id>non-regression</id>
            <phase>test</phase>
            <goals>
              <goal>test</goal>
            </goals>
            <configuration>
              <testFailureIgnore>false</testFailureIgnore>
            </configuration>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-antrun-plugin</artifactId>
        <version>1.8</version>
        <executions>
          <execution>
            <id>ant-util-zip</id>
            <phase>package</phase>
            <configuration>
              <target>
                <mkdir dir="${dss.util.build}/util"/>
                <jar jarfile="${dss.util.build}/util/temp.jar">
                  <zipgroupfileset dir="lib" includes="**/dss*.jar **/validation-policy*.jar"/>
                  <zipgroupfileset dir="${dss.util.lib}" includes="**/*.jar" excludes="bcprov-*.jar"/>
                  <zipgroupfileset dir="dist" includes="**/digidoc4j-*.jar" excludes="*-javadoc.jar *-sources.jar"/>
                </jar>

                <jar destfile="${dss.util.build}/util/digidoc4j-util.jar">
                  <zipfileset src="${dss.util.build}/util/temp.jar" excludes="META-INF/*.SF META-INF/*.RSA META-INF/*.DSA"/>
                  <manifest>
                    <attribute name="Built-By" value="${user.name}"/>
                    <attribute name="Implementation-Vendor" value="Republic of Estonia Information System Authority"/>
                    <attribute name="Implementation-Title" value="Java BDoc/DigiDoc utility"/>
                    <attribute name="Implementation-Version" value="${project.version}"/>
                    <attribute name="Main-Class" value="org.digidoc4j.main.DigiDoc4J"/>
                    <attribute name="Class-Path" value=". ./bcprov-jdk15on.jar"/>
                  </manifest>
                </jar>
                <delete file="${dss.util.build}/util/temp.jar"/>
                <copy todir="${dss.util.build}/util">
                  <fileset dir="${dss.util.lib}" includes="**/bcprov-*.jar"/>
                  <fileset dir="resources" includes="logback.xml"/>
                </copy>
                <zip destfile="${project.basedir}/target/${project.artifactId}-util.zip"
                     basedir="${dss.util.build}/util"/>
                <delete dir="${dss.util.build}/util"/>
              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>

      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-source-plugin</artifactId>
        <version>3.0.1</version>
        <executions>
          <execution>
            <id>attach-sources</id>
            <phase>package</phase>
            <goals>
              <goal>jar</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-javadoc-plugin</artifactId>
        <!-- <executions> -->
        <!-- <execution> -->
        <!-- <id>attach-javadocs</id> -->
        <!-- <goals> -->
        <!-- <goal>jar</goal> -->
        <!-- </goals> -->
        <!-- </execution> -->
        <!-- </executions> -->
      </plugin>
      <plugin>
        <!-- explicitly define maven-deploy-plugin after other to force exec
          order -->
        <artifactId>maven-deploy-plugin</artifactId>
        <executions>
          <execution>
            <id>deploy</id>
            <phase>deploy</phase>
            <goals>
              <goal>deploy</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-install-plugin</artifactId>
        <version>2.5.2</version>
      </plugin>
    </plugins>

    <pluginManagement>
      <plugins>
        <plugin>
          <groupId>org.jacoco</groupId>
          <artifactId>jacoco-maven-plugin</artifactId>
          <version>0.7.9</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-install-plugin</artifactId>
          <version>2.5.2</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-compiler-plugin</artifactId>
          <version>3.6.1</version>
          <configuration>
            <encoding>${project.encoding}</encoding>
            <source>${maven.compiler.source}</source>
            <target>${maven.compiler.target}</target>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-source-plugin</artifactId>
          <version>3.0.1</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-surefire-plugin</artifactId>
          <version>2.20</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-resources-plugin</artifactId>
          <version>3.0.2</version>
          <configuration>
            <encoding>${project.encoding}</encoding>
            <nonFilteredFileExtensions><!-- Avoid to modify keystore -->
              <nonFilteredFileExtension>jks</nonFilteredFileExtension>
              <nonFilteredFileExtension>p12</nonFilteredFileExtension>
            </nonFilteredFileExtensions>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jar-plugin</artifactId>
          <version>3.0.2</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-shade-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>3.0.0</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-release-plugin</artifactId>
          <version>2.5.3</version>
          <configuration>
            <autoVersionSubmodules>true</autoVersionSubmodules>
            <tagNameFormat>@{project.version}</tagNameFormat>
          </configuration>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-javadoc-plugin</artifactId>
          <version>2.10.4</version>
        </plugin>
        <plugin>
          <groupId>org.jvnet.jaxb2.maven2</groupId>
          <artifactId>maven-jaxb2-plugin</artifactId>
          <version>0.13.2</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-deploy-plugin</artifactId>
          <version>2.8.2</version>
        </plugin>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-antrun-plugin</artifactId>
          <version>1.8</version>
        </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project>
